#!/bin/bash

echo "üöÄ BountyChain Frontend Test"
echo "============================"
echo ""

# Dev server'ƒ± ba≈ülat
echo "Starting dev server..."
npm run dev &
DEV_PID=$!

echo "Dev server started (PID: $DEV_PID)"
echo ""
echo "‚è≥ Waiting 3 seconds for server to be ready..."
sleep 3

echo ""
echo "‚úÖ Frontend is running at: http://localhost:5174"
echo ""
echo "===================="
echo "üìù MANUAL TEST STEPS"
echo "===================="
echo ""
echo "1. WALLET CONNECTION TEST"
echo "   ‚ñ° Click 'Connect Wallet' button"
echo "   ‚ñ° Select Sui Wallet"
echo "   ‚ñ° Approve connection"
echo "   ‚ñ° Check if address appears in header"
echo "   Expected: ‚úÖ Wallet connected, address shown"
echo ""

echo "2. HOMEPAGE TEST"
echo "   ‚ñ° Check if stats are visible (TVL, Total Bounties, etc.)"
echo "   ‚ñ° All navigation links work"
echo "   ‚ñ° Footer links work"
echo "   Expected: ‚úÖ All elements render correctly"
echo ""

echo "3. HACK LIST TEST"
echo "   ‚ñ° Navigate to Hack List page"
echo "   ‚ñ° Check if bounties load (may be empty)"
echo "   ‚ñ° Try filter buttons (All, Active, Expired)"
echo "   ‚ñ° Try difficulty filter"
echo "   ‚ñ° Try sort dropdown"
echo "   Expected: ‚úÖ Filters work, no console errors"
echo ""

echo "4. CREATE BOUNTY TEST"
echo "   ‚ñ° Navigate to Create Bounty page"
echo "   ‚ñ° Fill all required fields:"
echo "      - Project Name: 'Test Project'"
echo "      - Title: 'Test Bug Bounty'"
echo "      - Description: 'Testing bounty creation'"
echo "      - Scope: 'Smart contracts only'"
echo "      - Rewards: Critical=1, High=0.5, Medium=0.2, Low=0.1 SUI"
echo "      - Deadline: 7 days"
echo "      - GitHub URL: https://github.com/test/test"
echo "      - Website: https://test.com"
echo "   ‚ñ° Click 'Create Bounty & Lock Funds'"
echo "   ‚ñ° Sign transaction in wallet"
echo "   ‚ñ° Wait for confirmation"
echo "   Expected: ‚úÖ Transaction succeeds, bounty created"
echo ""

echo "5. POC SUBMISSION TEST (after creating bounty)"
echo "   ‚ñ° Go back to Hack List"
echo "   ‚ñ° Click on your test bounty"
echo "   ‚ñ° Click 'Submit PoC'"
echo "   ‚ñ° Select a test file (any .txt or .pdf)"
echo "   ‚ñ° Choose severity (e.g., High)"
echo "   ‚ñ° Write vulnerability description"
echo "   ‚ñ° (Optional) Enable Seal Encryption"
echo "   ‚ñ° Click 'Upload & Submit'"
echo "   ‚ñ° Watch progress bar"
echo "   ‚ñ° Sign transaction"
echo "   Expected: ‚úÖ File uploads to Walrus, transaction succeeds"
echo ""

echo "6. MINI HACK TEST"
echo "   ‚ñ° Navigate to Mini Hack page"
echo "   ‚ñ° Check if challenges are visible"
echo "   ‚ñ° Click 'Submit Solution' on any challenge"
echo "   ‚ñ° Enter test solution: 'test123'"
echo "   ‚ñ° Click 'Submit Solution'"
echo "   ‚ñ° Sign transaction"
echo "   Expected: ‚ö†Ô∏è  Will fail (wrong answer) but transaction should work"
echo ""

echo "7. LEADERBOARD TEST"
echo "   ‚ñ° Navigate to Leaderboard page"
echo "   ‚ñ° Check if leaderboard loads"
echo "   ‚ñ° Your address should appear if you earned points"
echo "   Expected: ‚úÖ Leaderboard displays, no errors"
echo ""

echo "========================"
echo "üêõ COMMON ERRORS TO CHECK"
echo "========================"
echo ""
echo "In Browser Console (F12 ‚Üí Console):"
echo "   ‚ùå 'Failed to fetch' ‚Üí Check Walrus endpoints"
echo "   ‚ùå 'Transaction failed' ‚Üí Check gas balance"
echo "   ‚ùå 'Object not found' ‚Üí Check .env IDs"
echo "   ‚ùå 'CORS error' ‚Üí Normal for Walrus, handled in code"
echo ""

echo "In Network Tab (F12 ‚Üí Network):"
echo "   ‚úÖ Walrus uploads: Status 200"
echo "   ‚úÖ Sui RPC calls: Status 200"
echo "   ‚ö†Ô∏è  Walrus 404 before upload: Normal"
echo ""

echo "Wallet Issues:"
echo "   ‚ùå 'Insufficient gas' ‚Üí Get testnet SUI from faucet"
echo "   ‚ùå 'Network mismatch' ‚Üí Switch wallet to testnet"
echo "   ‚ùå 'Transaction rejected' ‚Üí Check wallet balance"
echo ""

echo "================================"
echo "üéØ WHAT YOU'RE LOOKING FOR"
echo "================================"
echo ""
echo "‚úÖ GOOD SIGNS:"
echo "   ‚Ä¢ Wallet connects successfully"
echo "   ‚Ä¢ No red errors in console"
echo "   ‚Ä¢ Forms validate correctly"
echo "   ‚Ä¢ Transactions get signed"
echo "   ‚Ä¢ Success notifications appear"
echo "   ‚Ä¢ File uploads show progress"
echo ""

echo "‚ùå BAD SIGNS:"
echo "   ‚Ä¢ Console full of red errors"
echo "   ‚Ä¢ Wallet doesn't connect"
echo "   ‚Ä¢ Buttons don't respond"
echo "   ‚Ä¢ Forms submit without validation"
echo "   ‚Ä¢ Transactions fail silently"
echo "   ‚Ä¢ Infinite loading states"
echo ""

echo "========================================="
echo "üìä AFTER TESTING, REPORT THESE:"
echo "========================================="
echo "1. Which tests passed? ‚úÖ"
echo "2. Which tests failed? ‚ùå"
echo "3. Any console errors? (copy-paste)"
echo "4. Screenshots of issues"
echo "5. What you expected vs what happened"
echo ""

echo "Press Ctrl+C to stop the dev server when done testing."
echo ""

# Keep script running
wait $DEV_PID
